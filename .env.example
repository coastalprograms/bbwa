# ============================================================================
# BBWA - Bayside Builders WA Environment Configuration
# ============================================================================
# Copy this file to .env.local and fill in your project-specific values
# 
# SECURITY NOTICE:
# - Never commit actual values to git
# - Keep service role keys server-side only
# - Use different secrets for dev/staging/production
# ============================================================================

# ============================================================================
# 1. SUPABASE DATABASE & AUTHENTICATION
# ============================================================================
# Required: Core Supabase connection (get from your Supabase dashboard)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here

# Optional: Publishable key (recommended over anon key for production)
# If both are set, publishable key takes precedence
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=

# Required: Server-only admin operations (NEVER expose to client)
# Used for: Admin dashboard, compliance alerts, worker management
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# Required: Session security for induction flow
# Generate with: openssl rand -hex 32
SESSION_SECRET=your_64_character_hex_string_here

# ============================================================================
# 2. AI CONTENT GENERATION
# ============================================================================
# Used for: Project description generation in admin dashboard
# Choose provider: 'gemini' (recommended) or 'openai'
AI_PROVIDER=gemini

# Gemini API (Google AI Studio) - https://makersuite.google.com/app/apikey
GEMINI_API_KEY=

# OpenAI API (alternative) - https://platform.openai.com/api-keys
OPENAI_API_KEY=

# ============================================================================
# 3. GOOGLE MAPS INTEGRATION
# ============================================================================
# Required for: Service area maps on public website
# Get from: https://console.developers.google.com/
# Enable: Maps JavaScript API, Geocoding API
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=

# ============================================================================
# 4. AIRTABLE CMS INTEGRATION
# ============================================================================
# Used for: Dynamic FAQ content and contact form submissions
# Get from: https://airtable.com/create/tokens

# FAQ Source Configuration
FAQ_SOURCE=local
# Options: 'local' (use Supabase faq table) | 'airtable' (fetch from Airtable)
FAQ_LIMIT=10

# Airtable API Configuration (Edge Functions only)
# SECURITY: Set these as Supabase Function secrets, not in .env.local
# Command: supabase functions env set --project-id your-project AIRTABLE_API_KEY=your_key
AIRTABLE_API_KEY=
AIRTABLE_BASE_ID=
AIRTABLE_FAQ_TABLE=FAQ
AIRTABLE_CONTACT_TABLE=Contact

# Optional Airtable field mappings (defaults shown)
AIRTABLE_FIELDS_QUESTION=Question
AIRTABLE_FIELDS_ANSWER=Answer
AIRTABLE_FIELDS_UPDATED=Last Modified
AIRTABLE_VIEW=Grid view

# ============================================================================
# 5. COMPLIANCE AUTOMATION & WEBHOOKS
# ============================================================================
# Used for: Automated alerts when workers fail compliance checks
# Integration with Make.com or n8n automation platforms

# Webhook Configuration
AUTOMATION_WEBHOOK_URL=
# Examples:
# Make.com: https://hook.make.com/your-webhook-id
# n8n: https://your-n8n-instance.com/webhook/your-webhook-id

# Webhook Security (HMAC SHA-256 verification)
# Generate strong secret: openssl rand -hex 32
AUTOMATION_WEBHOOK_SECRET=

# ============================================================================
# 6. EDGE FUNCTION SPECIFIC CONFIGURATION
# ============================================================================
# These variables are used by Supabase Edge Functions
# Set via: supabase functions env set --project-id your-project VAR_NAME=value

# Expiry Reminders Function
AUTOMATION_PROVIDER=make
# Options: 'make' | 'n8n'

MAKE_WEBHOOK_URL=
N8N_WEBHOOK_URL=

# Application URLs for worker notifications
INDUCTION_URL=https://your-domain.netlify.app/induction

# Builder Alert Configuration
BUILDER_ALERT_EMAIL=admin@your-domain.com
BUILDER_ALERT_PHONE=+61400000000

# ============================================================================
# 7. DEVELOPMENT & DEPLOYMENT
# ============================================================================
# These variables control development behavior and deployment configuration

# Next.js Configuration
NODE_ENV=development
# Options: development | production

# Feature Flags (Optional)
ENABLE_ANALYTICS=false
ENABLE_DEBUG_MODE=false

# Netlify Deployment (set in Netlify dashboard)
# NETLIFY_BUILD_HOOK_URL=
# NETLIFY_SITE_ID=

# ============================================================================
# 8. OPTIONAL: THIRD-PARTY INTEGRATIONS
# ============================================================================

# Email Provider (Future: Replace mock notifications)
# Resend.com configuration
# RESEND_API_KEY=

# SMS Provider (Future: Replace mock notifications) 
# Twilio configuration
# TWILIO_ACCOUNT_SID=
# TWILIO_AUTH_TOKEN=
# TWILIO_FROM_PHONE=

# Analytics (Optional)
# Google Analytics 4
# NEXT_PUBLIC_GA_MEASUREMENT_ID=

# Error Tracking (Optional)
# Sentry configuration
# SENTRY_DSN=
# NEXT_PUBLIC_SENTRY_DSN=

# ============================================================================
# QUICK SETUP CHECKLIST
# ============================================================================
# 1. ✅ Copy this file to .env.local
# 2. ✅ Create Supabase project and add connection variables
# 3. ✅ Generate SESSION_SECRET with: openssl rand -hex 32
# 4. ✅ Get Google Maps API key and enable required APIs
# 5. ✅ Choose AI provider (Gemini recommended) and add API key
# 6. ✅ Configure Airtable if using dynamic FAQ/contact forms
# 7. ✅ Set up automation webhooks for compliance alerts
# 8. ✅ Run setup validation: npm run env:validate
# 9. ✅ Test development server: npm run dev
# ============================================================================

# ============================================================================
# ENVIRONMENT VARIABLE HIERARCHY
# ============================================================================
# CRITICAL (App won't start):
# - NEXT_PUBLIC_SUPABASE_URL
# - NEXT_PUBLIC_SUPABASE_ANON_KEY (or PUBLISHABLE_KEY)
# - SUPABASE_SERVICE_ROLE_KEY
# - SESSION_SECRET
#
# IMPORTANT (Features disabled):
# - NEXT_PUBLIC_GOOGLE_MAPS_API_KEY (maps won't load)
# - AI_PROVIDER + API_KEY (project generation disabled)
#
# OPTIONAL (Graceful fallbacks):
# - AUTOMATION_WEBHOOK_* (alerts logged only)
# - AIRTABLE_* (local FAQ fallback)
# ============================================================================